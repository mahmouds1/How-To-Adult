<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Forms - How To Adult</title>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <link rel="stylesheet" href="./formStyle.css?{% now 'U' %}">
        <link rel="icon" href="./resources/form-icon.png">
    </head>

    <body>

        <div class="bg"></div>
        <div class="bg bg2"></div>
        <div class="bg bg3"></div>

        <header>
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa">
            <nav id="topBar">
                <ul>
                    <a href="./index.html">
                        <h1 class='title_hta'>HOW TO ADULT</h1>
                    </a>
                    <li><a href="./form.html">Forms</a></li>
                    <li class="dropdown">
                        <a href="javascript:void(0)" class="dropdownBtn">Categories</a>
                        <div class="wrapper">
                            <div class="dropdown-content">
                                <label class="navLabel">Home</label>
                                <a href="./home-categories/homeRepair.html">Repair</a>
                                <a href="./home-categories/homeCleaning.html">Cleaning</a>
                                <a href="./home-categories/homeGadgets.html">Gadgets</a>
                            </div>
                            <div class="dropdown-content">
                                <label class="navLabel">Personal</label>
                                <a href="./personal-categories/personalGrowth.html">Growth</a>
                                <a href="./personal-categories/personalCooking.html">Cooking</a>
                                <a href="./personal-categories/personalTravel.html">Travel</a>
                            </div>
                        </div>
                    </li>
                    <li><a href="./index.html"> Home</a></li>
                </ul>
            </nav>
        </header>

        <div class="prettyForm">

            <h6 id = "checkboxOption"><span>I have a resource </span> <span>I have a suggestion</span></h6>
            <input class="checkbox" type="checkbox" id="reg-log" name="reg-log" />
            <label for="reg-log"></label>
            
            <div class="card-3d-wrap">
                <div class="card-3d-wrapper">
            
            
                    <div class="card-front">
                        <div class="center-wrap">
                    
                            <h4>Submit a Resource!</h4>
                            <form class="form-group" id="resourceFormInput">
                                <input type="email" type="email" name="email" id="emailA" class="form-style" placeholder="Your Email"
                                    autocomplete="off">
                                <i class="input-icon uil uil-at"></i>
                    
                                <br>
                    
                                <input type="title" name="ReTitle" id="title" class="form-style" placeholder="Resource Title"
                                    autocomplete="off">
                                <i class="input-icon uil uil-at"></i>
                    
                                <br>
                    
                                <input type="text" name="authorChannelName" id="authChName" class="form-style"
                                    placeholder="Author or Channel Name" autocomplete="off">
                                <i class="input-icon uil uil-at"></i>
                    
                                <br>
                    
                                <input type="url" name="ReLink" id="link" class="form-style" placeholder="Link to Resource"
                                    autocomplete="off">
                                <i class="input-icon uil uil-lock-alt"></i>
                    
                                <br>
                    
                                <select name="category" id="cat" class="form-style" autocomplete="off">
                                    <option value="" selected disabled hidden>Pick a Category!</option>
                                    <optgroup label="Home">
                                        <option>Repair</option>
                                        <option>Gadgets</option>
                                        <option>Cleaning</option>
                                    </optgroup>
                                    <optgroup label="Personal">
                                        <option>Personal Growth</option>
                                        <option>Cooking</option>
                                        <option>Travel</option>
                                    </optgroup>
                                </select>
                    
                                <br>
                                <br>
                    
                            </form>
                            <!--end of form-group-->
                            <button id="addRe" class="btn mt-4">Submit</button>
                        </div>
                        <!--end of centerWrap-->
                    </div>
                    <!--end of card-front-->
            
            
                    <div class="card-back">
                        <div class="center-wrap">
                            <h4>Submit a Suggestion!</h4>
                            <form class="form-group" id="suggestionFormInput">
                                <input type="email" name="emailB" id="emailB" class="form-style" placeholder="Your Email"
                                    autocomplete="off">
                                <i class="input-icon uil uil-user"></i>

                                <br>


                                <div class="containerRadio">
                                    <h4 id="radioQ">what resource type would you prefer?</h4>
                                    <div class="input-radio-group">
                                        <input id="payment-method-card" type="radio" name="reType" value="video" checked="true" />
                                        <label for="payment-method-card"><span>Video</span></label>

                                        <input id="payment-method-paypal" type="radio" name="reType" value="article" />
                                        <label for="payment-method-paypal"> <span>Article</span></label>
                                    </div>
                                </div>

                                <br>

                                <input type="text" name="question" id="q" class="form-style"
                                    placeholder="Resource question you want an answer for?" autocomplete="off">
                                <i class="input-icon uil uil-lock-alt"></i>

                                <br>
                                <br>

                            </form>
                            <!--end of form-group-->

                            <button style="position:relative; bottom: 40px;" id="addSugg" class="btn mt-4">Submit</button>

                        </div>
                        <!--end of center-wrap-->
                    </div>
                    <!--end of card-back-->
                
                </div>
                <!--card-3d-wrapper-->
            </div>
            <!--card-3d-wrapper-->
            
        </div> <!--end of prettyForm-->


        <section id="dbCode">
            <script type="module">

                // Import the functions you need from the SDKs you need
                import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-app.js";
                import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-analytics.js";
                import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-database.js";
                // TODO: Add SDKs for Firebase products that you want to use
                // https://firebase.google.com/docs/web/setup#available-libraries

                // Your web app's Firebase configuration
                // For Firebase JS SDK v7.20.0 and later, measurementId is optional
                const firebaseConfig = {
                    apiKey: "AIzaSyA_selFhau1MjqN25KPf-sgMgnhH4pguBk",
                    authDomain: "how-to-adultv3.firebaseapp.com",
                    databaseURL: "https://how-to-adultv3-default-rtdb.firebaseio.com",
                    projectId: "how-to-adultv3",
                    storageBucket: "how-to-adultv3.appspot.com",
                    messagingSenderId: "775755015579",
                    appId: "1:775755015579:web:0e0b7a25d9a7f8eaa16d3e",
                    measurementId: "G-YM8W5FNFRW"
                };

                // Initialize Firebase APP with DB
                const app = initializeApp(firebaseConfig);
                const analytics = getAnalytics(app);

                //db set-up
                const db = getDatabase(app);

                //event listener that is triggered after 'Submit Resource' button is clicked 
                document.getElementById('addRe').addEventListener('click', (e) => {
                    e.preventDefault();
                    //grabs the values in each field and assigns it to vars in DB
                    set(ref(db, 'resources/' + Math.random().toString(36).slice(2, 7)), {
                        email: document.getElementById('emailA').value,
                        resourceTitle: document.getElementById('title').value,
                        authorChannelName: document.getElementById('authChName').value,
                        resourceLink: document.getElementById('link').value,
                        category: document.getElementById('cat').value
                    });

                    //confirmation that form was submitted
                    Swal.fire({
                        title: '<h3 id="swal">Thank you for submitting a resource!</h3>',
                        //icon: 'success',
                        showConfirmButton: false,
                        timer: 3000,
                        width: 600,
                        padding: '3em',
                        color: '#716add',
                        //background: '#fff url(./imgs/bamboo2.png)',
                        /**backdrop: `
                                    rgba(169,169,169,0.2)
                                    url("./imgs/corgi-thumbs-up.gif")
                                    top
                                    no-repeat
                                    `**/
                    })

                    //resets form after one submission
                    document.getElementById('resourceFormInput').reset();
                });



                //event listener that is triggered after 'Submit Suggestion' button is clicked 
                    document.getElementById('addSugg').addEventListener('click', (e) => {
                        e.preventDefault();

                        //grabs the values in each field and assigns it to vars in DB
                        set(ref(db, 'suggestions/' + Math.random().toString(36).slice(2, 7)), {
                            email: document.getElementById('emailB').value,
                            resourceType: document.querySelector('input[name="reType"]:checked').value,
                            resourceQ: document.getElementById('q').value,
                        });

                        //confirmation that form was submitted
                        Swal.fire({
                            title: '<h3 id="swal">Thank you for submitting a suggestion!</h3>',
                            //icon: 'success',
                            showConfirmButton: false,
                            timer: 3000,
                            width: 600,
                            padding: '3em',
                            color: '#716add',
                            //background: '#fff url(./imgs/bamboo2.png)',
                            /**backdrop: `
                                        rgba(169,169,169,0.2)
                                        url("./imgs/corgi-thumbs-up.gif")
                                        top
                                        no-repeat
                                        `**/
                        })
                        
                        //resets form after one submission
                        document.getElementById('suggestionFormInput').reset();
                    });


            </script>
        </section>
    </body>
</html>