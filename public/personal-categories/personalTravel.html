<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Personal Travel - How To Adult</title>
        <link rel="stylesheet" href="./catPDesign.css?{% now 'U' %}">
    </head>

    <body>
        <div class="bg"></div>
        
        <header>
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa">
            <nav id="topBar">
                <ul>
                    <a href="./../index.html">
                        <h1 class='title_hta'>HOW TO ADULT</h1>
                    </a>
                    <li><a href="./../form.html">Forms</a></li>
                    <li class="dropdown">
                        <a href="javascript:void(0)" class="dropbtn">Categories</a>
                        <div class="wrapper">
                            <div class="dropdown-content">
                                <label class="navLabel">Home</label>
                                <a href="./../home-categories/homeRepair.html">Repair</a>
                                <a href="./../home-categories/homeCleaning.html">Cleaning</a>
                                <a href="./../home-categories/homeGadgets.html">Gadgets</a>
                            </div>
                            <div class="dropdown-content">
                                <label class="navLabel">Personal</label>
                                <a href="./personalGrowth.html">Growth</a>
                                <a href="./personalCooking.html">Cooking</a>
                                <a href="./personalTravel.html">Travel</a>
                            </div>
                        </div>
                    </li>
                    <li><a href="./../index.html"> Home</a></li>
                </ul>
            </nav>
        </header>


        <h1 class="cat_title">Personal Travel</h1>


        <div class = "grid-container">
            <div class="grid-item" id="resource1">
                <h4 id="r1-titleLink"><b>[title here]</b></h4>
                <p id="r1-authCh">details here pt2</p>
                <p id="r1-views">details here pt3</p>
            </div>
            
            <div class="grid-item" id="resource2">
                <h4 id="r2-titleLink"><b>[title here]</b></h4>
                <p id="r2-authCh">details here pt2</p>
                <p id="r2-views">details here pt3</p>

            </div>

            <div class="grid-item" id="resource3">
                <h4 id="r3-titleLink"><b>[title here]</b></h4>
                <p id="r3-authCh">details here pt2</p>
                <p id="r3-views">details here pt3</p>

            </div>

            <div class="grid-item" id="resource4">
                <h4 id="r4-titleLink"><b>[title here]</b></h4>
                <p id="r4-authCh">details here pt2</p>
                <p id="r4-views">details here pt3</p>

            </div>


            <div class="grid-item" id="resource5">
                <h4 id="r5-titleLink"><b>[title here]</b></h4>
                <p id="r5-authCh">details here pt2</p>
                <p id="r5-views">details here pt3</p>

            </div>

            <div class="grid-item" id="resource6">
                <h4 id="r6-titleLink"><b>[title here]</b></h4>
                <p id="r6-authCh">details here pt2</p>
                <p id="r6-views">details here pt3</p>

            </div>

            <div class="grid-item" id="resource7">
                <h4 id="r7-titleLink"><b>[title here]</b></h4>
                <p id="r7-authCh">details here pt2</p>
                <p id="r7-views">details here pt3</p>

            </div>

            <div class="grid-item" id="resource8">
                <h4 id="r8-titleLink"><b>[title here]</b></h4>
                <p id="r8-authCh">details here pt2</p>
                <p id="r8-views">details here pt3</p>

            </div>

            <div class="grid-item" id="resource9">
                <h4 id="r9-titleLink"><b>[title here]</b></h4>
                <p id="r9-authCh">details here pt2</p>
                <p id="r9-views">details here pt3</p>

            </div>
        </div>

      
        <section id="dbCode">
            <script type="module">

                /*init firebase app*/
                // Import the functions you need from the SDKs you need
                import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-app.js";
                import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-analytics.js";
                import { getDatabase, ref, set, get, child, onValue} from "https://www.gstatic.com/firebasejs/9.8.1/firebase-database.js";
                // TODO: Add SDKs for Firebase products that you want to use
                // https://firebase.google.com/docs/web/setup#available-libraries

                // Your web app's Firebase configuration
                // For Firebase JS SDK v7.20.0 and later, measurementId is optional
                const firebaseConfig = {
                    apiKey: "AIzaSyA_selFhau1MjqN25KPf-sgMgnhH4pguBk",
                    authDomain: "how-to-adultv3.firebaseapp.com",
                    databaseURL: "https://how-to-adultv3-default-rtdb.firebaseio.com",
                    projectId: "how-to-adultv3",
                    storageBucket: "how-to-adultv3.appspot.com",
                    messagingSenderId: "775755015579",
                    appId: "1:775755015579:web:0e0b7a25d9a7f8eaa16d3e",
                    measurementId: "G-YM8W5FNFRW"
                };
                

                // Initialize Firebase APP with DB
                const app = initializeApp(firebaseConfig);
                const analytics = getAnalytics(app);

                //db set-up
                const db = getDatabase(app);
                var idCat = "p-t-";
                var idNum = 1, data;

                //loops through JSON tree within db to read data
                for (let i = 1; i <= 9; i++) {

                    //db references
                    const titleRef = ref(db, 'displyed-resources/title/' + idCat + idNum);
                    const linkRef = ref(db, 'displyed-resources/link/' + idCat + idNum);
                    const authChRef = ref(db, 'displyed-resources/auth-channel/' + idCat + idNum);
                    const viewRef = ref(db, 'displyed-resources/views/' + idCat + idNum);

                    //func grabs title/link
                    onValue(titleRef, (snapshot) => {
                         onValue(linkRef, (snapshot2) => {
                            //used for testing
                            console.log("title: ", snapshot.val());
                            console.log("link: ", snapshot2.val());

                            //print out link and title
                            document.querySelector('#r' + i + '-titleLink').innerHTML = `<h4><a href="${snapshot2.val()}">${snapshot.val()}</a></h4>`;
                        });

                    });

                    //func grabs auth
                    onValue(authChRef, (snapshot3) => {
                        //print out auth or channel name
                        data = snapshot3.val();
                        document.querySelector('#r' + i + '-authCh').innerHTML = `<p>${data}</p>`;
                    }); //end of onValue(authCh)


                    //func grabs views
                    onValue(viewRef, (snapshot4) => {
                        //print out num of views
                        data = snapshot4.val();
                        document.querySelector('#r' + i + '-views').innerHTML = `<p>${data}</p>`;
                    }); //end of onValue(view)

                    idNum++; //increment the id number to traverse through th
                }
            
            </script>
        </section>

    </body>
</html>